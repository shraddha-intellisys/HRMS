<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="top-nav">
  <!-- Hamburger Button -->
  <button class="hamburger-btn" (click)="toggleMenu()">
    <i class="fa fa-bars"></i>
  </button>

  <!-- HRMThread Title -->
  <h4>HRMTHREAD</h4>

  <!-- User Info Section -->
  <div class="main">
    <div class="user-info">
      <span class="user-name">Mr....</span>
      <span class="user-id">NQE00392</span>
    </div>
    <div class="profile-img">
      <img src="assets/employee (1).png" alt="Employee Image" class="employee-image">
    </div>
    <div class="user-info1">
      <div class="notification-container">
        <i class="fa fa-bell" (click)="toggleNotifications()"></i>
        <span *ngIf="unreadNotificationsCount > 0" class="notification-badge">
          {{ unreadNotificationsCount }}
        </span>
        
        <!-- Notification popup -->
        <div *ngIf="showNotifications" class="notification-popup">
          <div class="notification-header">
            <h3>Notifications</h3>
            <button class="close-btn" (click)="showNotifications = false">&times;</button>
          </div>
          <div class="notification-list">
            <div *ngFor="let notification of notifications" 
                 class="notification-item" 
                 [class.unread]="!notification.isRead">
              <div class="notification-content">
                <strong>{{ notification.title }}</strong>
                <p>{{ notification.message }}</p>
                <small>{{ notification.createdAt | date:'shortTime' }} â€¢ {{ notification.createdAt | date:'mediumDate' }}</small>
              </div>
            </div>
            <div *ngIf="notifications.length === 0" class="empty-notifications">
              No new notifications
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Sidebar Menu (10 Options for User) -->
<div id="menuList" *ngIf="isMenuOpen">
  <ul *ngIf="role === 'user'">
    <!-- 1. Dashboard -->
    <li>
      <a [routerLink]="['/dashboard']" (click)="navigateAndClose()"><span>ğŸ•µï¸â€â™‚ï¸</span> Admin Dashboard</a>
    </li>

    <!-- 2. Home -->
    <li>
      <a (click)="toggleDropdown('home')">
        <span>ğŸ </span> Home
        <span class="arrow" [ngClass]="{ open: isDropdownOpen.home }">&#9662;</span>
      </a>
      <ul *ngIf="isDropdownOpen.home" class="dropdown">
        <li><a [routerLink]="['/right']" (click)="navigateAndClose()">Home</a></li>
      </ul>
    </li>

    <!-- 3. Profile -->
    <li>
      <a (click)="toggleDropdown('profile')">
        <span>ğŸ‘¤</span> Profile
        <span class="arrow" [ngClass]="{ open: isDropdownOpen.profile }">&#9662;</span>
      </a>
      <ul *ngIf="isDropdownOpen.profile" class="dropdown">
        <li><a [routerLink]="['/profile']" (click)="navigateAndClose()">View Profile</a></li>
      </ul>
    </li>

    <!-- 4. Time & Attendance -->
    <li>
      <a [routerLink]="['/shedule']" (click)="navigateAndClose()"><span>ğŸ—“ï¸</span> Time & Attendance</a>
    </li>

    <!-- 5. Leave -->
    <li>
      <a [routerLink]="['/leave']" (click)="navigateAndClose()"><span>âœ…</span> Leave</a>
    </li>

    <!-- 6. Payroll -->
    <li>
      <a [routerLink]="['/leave']" (click)="navigateAndClose()"><span>ğŸ’°</span> Payslip</a>
    </li>

    <!-- 7. Apply Exit -->
    <li>
      <a [routerLink]="['/apply-exit']" (click)="navigateAndClose()"><span>ğŸšª</span> Apply Exit</a>
    </li>

    <li>
      <a [routerLink]="['/admin-dashboard']" (click)="navigateAndClose()"><span>ğŸ•µï¸â€â™‚ï¸</span> Admin Dashboard</a>
    </li>

    <li>
      <a [routerLink]="['/employee-profile']" (click)="navigateAndClose()"><span>ğŸ‘¤</span> Employee</a>
    </li>
    
    <li>
      <a [routerLink]="['/training']" (click)="navigateAndClose()"><span>âœ…</span> Leave Approval</a>
    </li>

    <li>
      <a [routerLink]="['/training']" (click)="navigateAndClose()"><span>ğŸ“Š</span>Attendance Approval</a>
    </li>

    <li>
      <a [routerLink]="['/announcements']" (click)="navigateAndClose()"><span>ğŸšª</span> Resignation Approval</a>
    </li>

    <li>
      <a [routerLink]="['/support']" (click)="navigateAndClose()"><span>ğŸ‘¤</span> Admin Profile</a>
    </li>
   
    <li>
      <a [routerLink]="['/support']" (click)="navigateAndClose()"><span>ğŸ“Š</span>Logout</a>
    </li>
  </ul>
</div>